// This file is auto-generated by @hey-api/openapi-ts

import {
  type Options,
  post2FaSetup,
  post2FaVerifySetup,
  delete2FaDisable,
  post2FaRecover,
  post2FaConfirmRecover,
  postAuthSignup,
  postAuthVerifySignup,
  postAuthLogin,
  postAuthLogout,
  postAuthRefresh,
  postAuthResetPasswordRequest,
  postAuthResetPassword,
  getCsrfToken,
} from "../sdk.gen";
import {
  queryOptions,
  type UseMutationOptions,
  type DefaultError,
} from "@tanstack/react-query";
import type {
  Post2FaSetupData,
  Post2FaSetupResponse,
  Post2FaVerifySetupData,
  Delete2FaDisableData,
  Post2FaRecoverData,
  Post2FaConfirmRecoverData,
  PostAuthSignupData,
  PostAuthSignupError,
  PostAuthVerifySignupData,
  PostAuthLoginData,
  PostAuthLoginError,
  PostAuthLoginResponse,
  PostAuthLogoutData,
  PostAuthLogoutError,
  PostAuthLogoutResponse,
  PostAuthRefreshData,
  PostAuthRefreshError,
  PostAuthRefreshResponse,
  PostAuthResetPasswordRequestData,
  PostAuthResetPasswordRequestError,
  PostAuthResetPasswordRequestResponse,
  PostAuthResetPasswordData,
  PostAuthResetPasswordError,
  PostAuthResetPasswordResponse,
  GetCsrfTokenData,
} from "../types.gen";
import { client as _heyApiClient } from "../client.gen";

export type QueryKey<TOptions extends Options> = [
  Pick<TOptions, "baseUrl" | "body" | "headers" | "path" | "query"> & {
    _id: string;
    _infinite?: boolean;
  },
];

const createQueryKey = <TOptions extends Options>(
  id: string,
  options?: TOptions,
  infinite?: boolean,
): [QueryKey<TOptions>[0]] => {
  const params: QueryKey<TOptions>[0] = {
    _id: id,
    baseUrl: (options?.client ?? _heyApiClient).getConfig().baseUrl,
  } as QueryKey<TOptions>[0];
  if (infinite) {
    params._infinite = infinite;
  }
  if (options?.body) {
    params.body = options.body;
  }
  if (options?.headers) {
    params.headers = options.headers;
  }
  if (options?.path) {
    params.path = options.path;
  }
  if (options?.query) {
    params.query = options.query;
  }
  return [params];
};

export const post2FaSetupQueryKey = (options?: Options<Post2FaSetupData>) =>
  createQueryKey("post2FaSetup", options);

/**
 * Generates QR code and temporary secret for 2FA setup
 * Initiates the 2FA setup process by generating a QR code and a temporary secret for a TOTP app like Google Authenticator.
 */
export const post2FaSetupOptions = (options?: Options<Post2FaSetupData>) => {
  return queryOptions({
    queryFn: async ({ queryKey, signal }) => {
      const { data } = await post2FaSetup({
        ...options,
        ...queryKey[0],
        signal,
        throwOnError: true,
      });
      return data;
    },
    queryKey: post2FaSetupQueryKey(options),
  });
};

/**
 * Generates QR code and temporary secret for 2FA setup
 * Initiates the 2FA setup process by generating a QR code and a temporary secret for a TOTP app like Google Authenticator.
 */
export const post2FaSetupMutation = (
  options?: Partial<Options<Post2FaSetupData>>,
): UseMutationOptions<
  Post2FaSetupResponse,
  DefaultError,
  Options<Post2FaSetupData>
> => {
  const mutationOptions: UseMutationOptions<
    Post2FaSetupResponse,
    DefaultError,
    Options<Post2FaSetupData>
  > = {
    mutationFn: async (localOptions) => {
      const { data } = await post2FaSetup({
        ...options,
        ...localOptions,
        throwOnError: true,
      });
      return data;
    },
  };
  return mutationOptions;
};

export const post2FaVerifySetupQueryKey = (
  options: Options<Post2FaVerifySetupData>,
) => createQueryKey("post2FaVerifySetup", options);

/**
 * Verifies the 2FA setup code
 * Verifies the TOTP code to confirm 2FA setup with an authenticator app.
 */
export const post2FaVerifySetupOptions = (
  options: Options<Post2FaVerifySetupData>,
) => {
  return queryOptions({
    queryFn: async ({ queryKey, signal }) => {
      const { data } = await post2FaVerifySetup({
        ...options,
        ...queryKey[0],
        signal,
        throwOnError: true,
      });
      return data;
    },
    queryKey: post2FaVerifySetupQueryKey(options),
  });
};

/**
 * Verifies the 2FA setup code
 * Verifies the TOTP code to confirm 2FA setup with an authenticator app.
 */
export const post2FaVerifySetupMutation = (
  options?: Partial<Options<Post2FaVerifySetupData>>,
): UseMutationOptions<
  unknown,
  DefaultError,
  Options<Post2FaVerifySetupData>
> => {
  const mutationOptions: UseMutationOptions<
    unknown,
    DefaultError,
    Options<Post2FaVerifySetupData>
  > = {
    mutationFn: async (localOptions) => {
      const { data } = await post2FaVerifySetup({
        ...options,
        ...localOptions,
        throwOnError: true,
      });
      return data;
    },
  };
  return mutationOptions;
};

/**
 * Disables 2FA
 * Disables two-factor authentication for the current user and deletes the 2FA secret from the database.
 */
export const delete2FaDisableMutation = (
  options?: Partial<Options<Delete2FaDisableData>>,
): UseMutationOptions<unknown, DefaultError, Options<Delete2FaDisableData>> => {
  const mutationOptions: UseMutationOptions<
    unknown,
    DefaultError,
    Options<Delete2FaDisableData>
  > = {
    mutationFn: async (localOptions) => {
      const { data } = await delete2FaDisable({
        ...options,
        ...localOptions,
        throwOnError: true,
      });
      return data;
    },
  };
  return mutationOptions;
};

export const post2FaRecoverQueryKey = (options: Options<Post2FaRecoverData>) =>
  createQueryKey("post2FaRecover", options);

/**
 * Request email-based 2FA reset
 * Requests a recovery process for users who are locked out due to losing access to their 2FA device (phone).
 */
export const post2FaRecoverOptions = (options: Options<Post2FaRecoverData>) => {
  return queryOptions({
    queryFn: async ({ queryKey, signal }) => {
      const { data } = await post2FaRecover({
        ...options,
        ...queryKey[0],
        signal,
        throwOnError: true,
      });
      return data;
    },
    queryKey: post2FaRecoverQueryKey(options),
  });
};

/**
 * Request email-based 2FA reset
 * Requests a recovery process for users who are locked out due to losing access to their 2FA device (phone).
 */
export const post2FaRecoverMutation = (
  options?: Partial<Options<Post2FaRecoverData>>,
): UseMutationOptions<unknown, DefaultError, Options<Post2FaRecoverData>> => {
  const mutationOptions: UseMutationOptions<
    unknown,
    DefaultError,
    Options<Post2FaRecoverData>
  > = {
    mutationFn: async (localOptions) => {
      const { data } = await post2FaRecover({
        ...options,
        ...localOptions,
        throwOnError: true,
      });
      return data;
    },
  };
  return mutationOptions;
};

export const post2FaConfirmRecoverQueryKey = (
  options: Options<Post2FaConfirmRecoverData>,
) => createQueryKey("post2FaConfirmRecover", options);

/**
 * Confirm 2FA reset
 * Confirms the reset process for 2FA by verifying the token sent to the user's email.
 */
export const post2FaConfirmRecoverOptions = (
  options: Options<Post2FaConfirmRecoverData>,
) => {
  return queryOptions({
    queryFn: async ({ queryKey, signal }) => {
      const { data } = await post2FaConfirmRecover({
        ...options,
        ...queryKey[0],
        signal,
        throwOnError: true,
      });
      return data;
    },
    queryKey: post2FaConfirmRecoverQueryKey(options),
  });
};

/**
 * Confirm 2FA reset
 * Confirms the reset process for 2FA by verifying the token sent to the user's email.
 */
export const post2FaConfirmRecoverMutation = (
  options?: Partial<Options<Post2FaConfirmRecoverData>>,
): UseMutationOptions<
  unknown,
  DefaultError,
  Options<Post2FaConfirmRecoverData>
> => {
  const mutationOptions: UseMutationOptions<
    unknown,
    DefaultError,
    Options<Post2FaConfirmRecoverData>
  > = {
    mutationFn: async (localOptions) => {
      const { data } = await post2FaConfirmRecover({
        ...options,
        ...localOptions,
        throwOnError: true,
      });
      return data;
    },
  };
  return mutationOptions;
};

export const postAuthSignupQueryKey = (options: Options<PostAuthSignupData>) =>
  createQueryKey("postAuthSignup", options);

/**
 * User Signup
 * Registers a new user and saves them to the database with admin role.
 */
export const postAuthSignupOptions = (options: Options<PostAuthSignupData>) => {
  return queryOptions({
    queryFn: async ({ queryKey, signal }) => {
      const { data } = await postAuthSignup({
        ...options,
        ...queryKey[0],
        signal,
        throwOnError: true,
      });
      return data;
    },
    queryKey: postAuthSignupQueryKey(options),
  });
};

/**
 * User Signup
 * Registers a new user and saves them to the database with admin role.
 */
export const postAuthSignupMutation = (
  options?: Partial<Options<PostAuthSignupData>>,
): UseMutationOptions<
  unknown,
  PostAuthSignupError,
  Options<PostAuthSignupData>
> => {
  const mutationOptions: UseMutationOptions<
    unknown,
    PostAuthSignupError,
    Options<PostAuthSignupData>
  > = {
    mutationFn: async (localOptions) => {
      const { data } = await postAuthSignup({
        ...options,
        ...localOptions,
        throwOnError: true,
      });
      return data;
    },
  };
  return mutationOptions;
};

export const postAuthVerifySignupQueryKey = (
  options: Options<PostAuthVerifySignupData>,
) => createQueryKey("postAuthVerifySignup", options);

/**
 * Verify Signup Token
 * Verifies a user's signup token and activates their account.
 */
export const postAuthVerifySignupOptions = (
  options: Options<PostAuthVerifySignupData>,
) => {
  return queryOptions({
    queryFn: async ({ queryKey, signal }) => {
      const { data } = await postAuthVerifySignup({
        ...options,
        ...queryKey[0],
        signal,
        throwOnError: true,
      });
      return data;
    },
    queryKey: postAuthVerifySignupQueryKey(options),
  });
};

/**
 * Verify Signup Token
 * Verifies a user's signup token and activates their account.
 */
export const postAuthVerifySignupMutation = (
  options?: Partial<Options<PostAuthVerifySignupData>>,
): UseMutationOptions<
  unknown,
  DefaultError,
  Options<PostAuthVerifySignupData>
> => {
  const mutationOptions: UseMutationOptions<
    unknown,
    DefaultError,
    Options<PostAuthVerifySignupData>
  > = {
    mutationFn: async (localOptions) => {
      const { data } = await postAuthVerifySignup({
        ...options,
        ...localOptions,
        throwOnError: true,
      });
      return data;
    },
  };
  return mutationOptions;
};

export const postAuthLoginQueryKey = (options: Options<PostAuthLoginData>) =>
  createQueryKey("postAuthLogin", options);

/**
 * User Login
 * Generates a session token for the user and sets it in an HTTP-only cookie.
 */
export const postAuthLoginOptions = (options: Options<PostAuthLoginData>) => {
  return queryOptions({
    queryFn: async ({ queryKey, signal }) => {
      const { data } = await postAuthLogin({
        ...options,
        ...queryKey[0],
        signal,
        throwOnError: true,
      });
      return data;
    },
    queryKey: postAuthLoginQueryKey(options),
  });
};

/**
 * User Login
 * Generates a session token for the user and sets it in an HTTP-only cookie.
 */
export const postAuthLoginMutation = (
  options?: Partial<Options<PostAuthLoginData>>,
): UseMutationOptions<
  PostAuthLoginResponse,
  PostAuthLoginError,
  Options<PostAuthLoginData>
> => {
  const mutationOptions: UseMutationOptions<
    PostAuthLoginResponse,
    PostAuthLoginError,
    Options<PostAuthLoginData>
  > = {
    mutationFn: async (localOptions) => {
      const { data } = await postAuthLogin({
        ...options,
        ...localOptions,
        throwOnError: true,
      });
      return data;
    },
  };
  return mutationOptions;
};

export const postAuthLogoutQueryKey = (options?: Options<PostAuthLogoutData>) =>
  createQueryKey("postAuthLogout", options);

/**
 * User Logout
 * Logs out the user by deleting the session cookie.
 */
export const postAuthLogoutOptions = (
  options?: Options<PostAuthLogoutData>,
) => {
  return queryOptions({
    queryFn: async ({ queryKey, signal }) => {
      const { data } = await postAuthLogout({
        ...options,
        ...queryKey[0],
        signal,
        throwOnError: true,
      });
      return data;
    },
    queryKey: postAuthLogoutQueryKey(options),
  });
};

/**
 * User Logout
 * Logs out the user by deleting the session cookie.
 */
export const postAuthLogoutMutation = (
  options?: Partial<Options<PostAuthLogoutData>>,
): UseMutationOptions<
  PostAuthLogoutResponse,
  PostAuthLogoutError,
  Options<PostAuthLogoutData>
> => {
  const mutationOptions: UseMutationOptions<
    PostAuthLogoutResponse,
    PostAuthLogoutError,
    Options<PostAuthLogoutData>
  > = {
    mutationFn: async (localOptions) => {
      const { data } = await postAuthLogout({
        ...options,
        ...localOptions,
        throwOnError: true,
      });
      return data;
    },
  };
  return mutationOptions;
};

export const postAuthRefreshQueryKey = (
  options?: Options<PostAuthRefreshData>,
) => createQueryKey("postAuthRefresh", options);

/**
 * Refresh Access Token
 * Refreshes the access token using a valid refresh token stored in cookies. Requires authentication.
 */
export const postAuthRefreshOptions = (
  options?: Options<PostAuthRefreshData>,
) => {
  return queryOptions({
    queryFn: async ({ queryKey, signal }) => {
      const { data } = await postAuthRefresh({
        ...options,
        ...queryKey[0],
        signal,
        throwOnError: true,
      });
      return data;
    },
    queryKey: postAuthRefreshQueryKey(options),
  });
};

/**
 * Refresh Access Token
 * Refreshes the access token using a valid refresh token stored in cookies. Requires authentication.
 */
export const postAuthRefreshMutation = (
  options?: Partial<Options<PostAuthRefreshData>>,
): UseMutationOptions<
  PostAuthRefreshResponse,
  PostAuthRefreshError,
  Options<PostAuthRefreshData>
> => {
  const mutationOptions: UseMutationOptions<
    PostAuthRefreshResponse,
    PostAuthRefreshError,
    Options<PostAuthRefreshData>
  > = {
    mutationFn: async (localOptions) => {
      const { data } = await postAuthRefresh({
        ...options,
        ...localOptions,
        throwOnError: true,
      });
      return data;
    },
  };
  return mutationOptions;
};

export const postAuthResetPasswordRequestQueryKey = (
  options: Options<PostAuthResetPasswordRequestData>,
) => createQueryKey("postAuthResetPasswordRequest", options);

/**
 * Initiate Password Reset
 * Sends a password reset email to the given email address. Always responds with 204 to avoid revealing user existence.
 */
export const postAuthResetPasswordRequestOptions = (
  options: Options<PostAuthResetPasswordRequestData>,
) => {
  return queryOptions({
    queryFn: async ({ queryKey, signal }) => {
      const { data } = await postAuthResetPasswordRequest({
        ...options,
        ...queryKey[0],
        signal,
        throwOnError: true,
      });
      return data;
    },
    queryKey: postAuthResetPasswordRequestQueryKey(options),
  });
};

/**
 * Initiate Password Reset
 * Sends a password reset email to the given email address. Always responds with 204 to avoid revealing user existence.
 */
export const postAuthResetPasswordRequestMutation = (
  options?: Partial<Options<PostAuthResetPasswordRequestData>>,
): UseMutationOptions<
  PostAuthResetPasswordRequestResponse,
  PostAuthResetPasswordRequestError,
  Options<PostAuthResetPasswordRequestData>
> => {
  const mutationOptions: UseMutationOptions<
    PostAuthResetPasswordRequestResponse,
    PostAuthResetPasswordRequestError,
    Options<PostAuthResetPasswordRequestData>
  > = {
    mutationFn: async (localOptions) => {
      const { data } = await postAuthResetPasswordRequest({
        ...options,
        ...localOptions,
        throwOnError: true,
      });
      return data;
    },
  };
  return mutationOptions;
};

export const postAuthResetPasswordQueryKey = (
  options: Options<PostAuthResetPasswordData>,
) => createQueryKey("postAuthResetPassword", options);

/**
 * Complete Password Reset
 * Resets the user's password using a valid reset token and a new password.
 */
export const postAuthResetPasswordOptions = (
  options: Options<PostAuthResetPasswordData>,
) => {
  return queryOptions({
    queryFn: async ({ queryKey, signal }) => {
      const { data } = await postAuthResetPassword({
        ...options,
        ...queryKey[0],
        signal,
        throwOnError: true,
      });
      return data;
    },
    queryKey: postAuthResetPasswordQueryKey(options),
  });
};

/**
 * Complete Password Reset
 * Resets the user's password using a valid reset token and a new password.
 */
export const postAuthResetPasswordMutation = (
  options?: Partial<Options<PostAuthResetPasswordData>>,
): UseMutationOptions<
  PostAuthResetPasswordResponse,
  PostAuthResetPasswordError,
  Options<PostAuthResetPasswordData>
> => {
  const mutationOptions: UseMutationOptions<
    PostAuthResetPasswordResponse,
    PostAuthResetPasswordError,
    Options<PostAuthResetPasswordData>
  > = {
    mutationFn: async (localOptions) => {
      const { data } = await postAuthResetPassword({
        ...options,
        ...localOptions,
        throwOnError: true,
      });
      return data;
    },
  };
  return mutationOptions;
};

export const getCsrfTokenQueryKey = (options?: Options<GetCsrfTokenData>) =>
  createQueryKey("getCsrfToken", options);

/**
 * Get CSRF token
 * Returns a CSRF token and sets a cookie named `XSRF-TOKEN`.<br>
 * Include the returned token in the `x-csrf-token` header of all write (POST, PUT, PATCH, DELETE) requests.<br>
 * This protects against Cross-Site Request Forgery attacks by validating state-changing requests.
 *
 */
export const getCsrfTokenOptions = (options?: Options<GetCsrfTokenData>) => {
  return queryOptions({
    queryFn: async ({ queryKey, signal }) => {
      const { data } = await getCsrfToken({
        ...options,
        ...queryKey[0],
        signal,
        throwOnError: true,
      });
      return data;
    },
    queryKey: getCsrfTokenQueryKey(options),
  });
};
